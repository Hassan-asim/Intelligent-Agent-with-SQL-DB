
PRAGMA foreign_keys = ON;

DROP TABLE IF EXISTS order_items;
DROP TABLE IF EXISTS refunds;
DROP TABLE IF EXISTS payments;
DROP TABLE IF EXISTS orders;
DROP TABLE IF EXISTS products;
DROP TABLE IF EXISTS customers;

CREATE TABLE customers (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  email TEXT UNIQUE,
  created_at TEXT NOT NULL,
  region TEXT
);

CREATE TABLE products (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  category TEXT,
  price_cents INTEGER NOT NULL
);

CREATE TABLE orders (
  id INTEGER PRIMARY KEY,
  customer_id INTEGER NOT NULL,
  order_date TEXT NOT NULL,
  status TEXT NOT NULL CHECK (status IN ('pending','paid','refunded','canceled')),
  FOREIGN KEY(customer_id) REFERENCES customers(id)
);

CREATE TABLE payments (
  id INTEGER PRIMARY KEY,
  order_id INTEGER NOT NULL,
  amount_cents INTEGER NOT NULL,
  paid_at TEXT,
  method TEXT,
  status TEXT NOT NULL CHECK (status IN ('succeeded','failed','refunded','pending')),
  FOREIGN KEY(order_id) REFERENCES orders(id)
);

CREATE TABLE refunds (
  id INTEGER PRIMARY KEY,
  order_id INTEGER NOT NULL,
  amount_cents INTEGER NOT NULL,
  refunded_at TEXT NOT NULL,
  reason TEXT,
  FOREIGN KEY(order_id) REFERENCES orders(id)
);

CREATE TABLE order_items (
  id INTEGER PRIMARY KEY,
  order_id INTEGER NOT NULL,
  product_id INTEGER NOT NULL,
  quantity INTEGER NOT NULL,
  unit_price_cents INTEGER NOT NULL,
  FOREIGN KEY(order_id) REFERENCES orders(id),
  FOREIGN KEY(product_id) REFERENCES products(id)
);

-- Seed data
INSERT INTO customers (id, name, email, created_at, region) VALUES
(1, 'Ayesha Khan', 'ayesha@example.com', '2025-01-15', 'APAC'),
(2, 'Bilal Ahmed', 'bilal@example.com', '2025-02-03', 'APAC'),
(3, 'Chris Evans', 'chris@example.com', '2025-03-20', 'NA'),
(4, 'Diana Prince', 'diana@example.com', '2025-04-11', 'EU'),
(5, 'Ethan Lee', 'ethan@example.com', '2025-05-05', 'NA'),
(6, 'Fatima Noor', 'fatima@example.com', '2025-06-25', 'APAC'),
(7, 'Gabriel Silva', 'gabriel@example.com', '2025-01-20', 'LATAM'),
(8, 'Hannah Kim', 'hannah@example.com', '2025-02-10', 'APAC'),
(9, 'Ivan Petrov', 'ivan@example.com', '2025-03-05', 'EU'),
(10, 'Julia Martinez', 'julia@example.com', '2025-04-15', 'LATAM'),
(11, 'Kevin O\'Connor', 'kevin@example.com', '2025-05-20', 'NA'),
(12, 'Luna Chen', 'luna@example.com', '2025-06-10', 'APAC'),
(13, 'Marcus Johnson', 'marcus@example.com', '2025-01-25', 'NA'),
(14, 'Nina Patel', 'nina@example.com', '2025-02-28', 'APAC'),
(15, 'Oscar Rodriguez', 'oscar@example.com', '2025-03-15', 'LATAM'),
(16, 'Priya Sharma', 'priya@example.com', '2025-04-20', 'APAC'),
(17, 'Quinn Thompson', 'quinn@example.com', '2025-05-10', 'NA'),
(18, 'Rosa Garcia', 'rosa@example.com', '2025-06-05', 'LATAM'),
(19, 'Samuel Wilson', 'samuel@example.com', '2025-01-30', 'NA'),
(20, 'Tara Singh', 'tara@example.com', '2025-02-15', 'APAC');

INSERT INTO products (id, name, category, price_cents) VALUES
(1, 'Aurora Lamp', 'Home', 4999),
(2, 'Nimbus Headphones', 'Electronics', 12999),
(3, 'Terra Mug', 'Home', 1999),
(4, 'Zephyr Jacket', 'Apparel', 8999),
(5, 'Pulse Fitness Band', 'Electronics', 5999),
(6, 'Orbit Backpack', 'Apparel', 7499),
(7, 'Quantum Keyboard', 'Electronics', 15999),
(8, 'Zen Garden Set', 'Home', 7999),
(9, 'Adventure Hiking Boots', 'Apparel', 12999),
(10, 'Smart Watch Pro', 'Electronics', 19999),
(11, 'Cozy Blanket', 'Home', 3999),
(12, 'Running Shorts', 'Apparel', 2999),
(13, 'Wireless Mouse', 'Electronics', 3999),
(14, 'Ceramic Vase', 'Home', 5999),
(15, 'Leather Wallet', 'Apparel', 4999),
(16, 'Bluetooth Speaker', 'Electronics', 8999),
(17, 'Desk Organizer', 'Home', 2499),
(18, 'Cotton T-Shirt', 'Apparel', 1999),
(19, 'USB-C Cable', 'Electronics', 999),
(20, 'Candle Set', 'Home', 3499);

INSERT INTO orders (id, customer_id, order_date, status) VALUES
(101, 1, '2025-06-30', 'paid'),
(102, 1, '2025-07-02', 'paid'),
(103, 2, '2025-07-10', 'refunded'),
(104, 3, '2025-07-14', 'paid'),
(105, 4, '2025-07-20', 'pending'),
(106, 4, '2025-08-01', 'paid'),
(107, 5, '2025-08-03', 'paid'),
(108, 6, '2025-08-05', 'paid'),
(109, 6, '2025-08-10', 'canceled'),
(110, 2, '2025-08-12', 'paid'),
(111, 3, '2025-08-15', 'paid'),
(112, 5, '2025-08-18', 'refunded'),
(113, 7, '2025-08-20', 'paid'),
(114, 8, '2025-08-22', 'paid'),
(115, 9, '2025-08-25', 'paid'),
(116, 10, '2025-08-28', 'paid'),
(117, 11, '2025-09-01', 'paid'),
(118, 12, '2025-09-03', 'paid'),
(119, 13, '2025-09-05', 'paid'),
(120, 14, '2025-09-08', 'paid'),
(121, 15, '2025-09-10', 'paid'),
(122, 16, '2025-09-12', 'paid'),
(123, 17, '2025-09-15', 'paid'),
(124, 18, '2025-09-18', 'paid'),
(125, 19, '2025-09-20', 'paid'),
(126, 20, '2025-09-22', 'paid'),
(127, 1, '2025-09-25', 'paid'),
(128, 2, '2025-09-28', 'paid'),
(129, 3, '2025-10-01', 'paid'),
(130, 4, '2025-10-03', 'paid'),
(131, 5, '2025-10-05', 'paid'),
(132, 6, '2025-10-08', 'paid'),
(133, 7, '2025-10-10', 'paid'),
(134, 8, '2025-10-12', 'paid'),
(135, 9, '2025-10-15', 'paid'),
(136, 10, '2025-10-18', 'paid'),
(137, 11, '2025-10-20', 'paid'),
(138, 12, '2025-10-22', 'paid'),
(139, 13, '2025-10-25', 'paid'),
(140, 14, '2025-10-28', 'paid'),
(141, 15, '2025-11-01', 'paid'),
(142, 16, '2025-11-03', 'paid'),
(143, 17, '2025-11-05', 'paid'),
(144, 18, '2025-11-08', 'paid'),
(145, 19, '2025-11-10', 'paid'),
(146, 20, '2025-11-12', 'paid'),
(147, 1, '2025-11-15', 'paid'),
(148, 2, '2025-11-18', 'paid'),
(149, 3, '2025-11-20', 'paid'),
(150, 4, '2025-11-22', 'paid'),
(151, 5, '2025-11-25', 'paid'),
(152, 6, '2025-11-28', 'paid'),
(153, 7, '2025-12-01', 'paid'),
(154, 8, '2025-12-03', 'paid'),
(155, 9, '2025-12-05', 'paid'),
(156, 10, '2025-12-08', 'paid'),
(157, 11, '2025-12-10', 'paid'),
(158, 12, '2025-12-12', 'paid'),
(159, 13, '2025-12-15', 'paid'),
(160, 14, '2025-12-18', 'paid'),
(161, 15, '2025-12-20', 'paid'),
(162, 16, '2025-12-22', 'paid'),
(163, 17, '2025-12-25', 'paid'),
(164, 18, '2025-12-28', 'paid'),
(165, 19, '2025-12-30', 'paid'),
(166, 20, '2026-01-02', 'paid'),
(167, 1, '2026-01-05', 'paid'),
(168, 2, '2026-01-08', 'paid'),
(169, 3, '2026-01-10', 'paid'),
(170, 4, '2026-01-12', 'paid'),
(171, 5, '2026-01-15', 'paid'),
(172, 6, '2026-01-18', 'paid'),
(173, 7, '2026-01-20', 'paid'),
(174, 8, '2026-01-22', 'paid'),
(175, 9, '2026-01-25', 'paid'),
(176, 10, '2026-01-28', 'paid'),
(177, 11, '2026-01-30', 'paid'),
(178, 12, '2026-02-02', 'paid'),
(179, 13, '2026-02-05', 'paid'),
(180, 14, '2026-02-08', 'paid'),
(181, 15, '2026-02-10', 'paid'),
(182, 16, '2026-02-12', 'paid'),
(183, 17, '2026-02-15', 'paid'),
(184, 18, '2026-02-18', 'paid'),
(185, 19, '2026-02-20', 'paid'),
(186, 20, '2026-02-22', 'paid'),
(187, 1, '2026-02-25', 'paid'),
(188, 2, '2026-02-28', 'paid'),
(189, 3, '2026-03-02', 'paid'),
(190, 4, '2026-03-05', 'paid'),
(191, 5, '2026-03-08', 'paid'),
(192, 6, '2026-03-10', 'paid'),
(193, 7, '2026-03-12', 'paid'),
(194, 8, '2026-03-15', 'paid'),
(195, 9, '2026-03-18', 'paid'),
(196, 10, '2026-03-20', 'paid'),
(197, 11, '2026-03-22', 'paid'),
(198, 12, '2026-03-25', 'paid'),
(199, 13, '2026-03-28', 'paid'),
(200, 14, '2026-03-30', 'paid');

INSERT INTO payments (id, order_id, amount_cents, paid_at, method, status) VALUES
(1001, 101,  6998, '2025-06-30', 'card', 'succeeded'),
(1002, 102, 12999, '2025-07-02', 'card', 'succeeded'),
(1003, 103,  8999, '2025-07-10', 'card', 'refunded'),
(1004, 104,  4999, '2025-07-14', 'paypal', 'succeeded'),
(1005, 105,  1999, NULL, 'card', 'pending'),
(1006, 106, 142,   '2025-08-01', 'card', 'succeeded'), -- tiny test amount
(1007, 107, 13498, '2025-08-03', 'card', 'succeeded'),
(1008, 108,  5999, '2025-08-05', 'card', 'succeeded'),
(1009, 109,  7499, NULL, 'card', 'failed'),
(1010, 110,  7499, '2025-08-12', 'paypal', 'succeeded'),
(1011, 111,  6998, '2025-08-15', 'card', 'succeeded'),
(1012, 112, 14998, '2025-08-18', 'card', 'refunded'),
(1013, 113, 15999, '2025-08-20', 'card', 'succeeded'),
(1014, 114, 12999, '2025-08-22', 'paypal', 'succeeded'),
(1015, 115, 7999, '2025-08-25', 'card', 'succeeded'),
(1016, 116, 8999, '2025-08-28', 'card', 'succeeded'),
(1017, 117, 19999, '2025-09-01', 'card', 'succeeded'),
(1018, 118, 3999, '2025-09-03', 'paypal', 'succeeded'),
(1019, 119, 2999, '2025-09-05', 'card', 'succeeded'),
(1020, 120, 3999, '2025-09-08', 'card', 'succeeded'),
(1021, 121, 5999, '2025-09-10', 'card', 'succeeded'),
(1022, 122, 4999, '2025-09-12', 'paypal', 'succeeded'),
(1023, 123, 8999, '2025-09-15', 'card', 'succeeded'),
(1024, 124, 2499, '2025-09-18', 'card', 'succeeded'),
(1025, 125, 1999, '2025-09-20', 'card', 'succeeded'),
(1026, 126, 999, '2025-09-22', 'paypal', 'succeeded'),
(1027, 127, 3499, '2025-09-25', 'card', 'succeeded'),
(1028, 128, 15999, '2025-09-28', 'card', 'succeeded'),
(1029, 129, 7999, '2025-10-01', 'card', 'succeeded'),
(1030, 130, 12999, '2025-10-03', 'paypal', 'succeeded'),
(1031, 131, 19999, '2025-10-05', 'card', 'succeeded'),
(1032, 132, 2999, '2025-10-08', 'card', 'succeeded'),
(1033, 133, 3999, '2025-10-10', 'card', 'succeeded'),
(1034, 134, 5999, '2025-10-12', 'paypal', 'succeeded'),
(1035, 135, 4999, '2025-10-15', 'card', 'succeeded'),
(1036, 136, 8999, '2025-10-18', 'card', 'succeeded'),
(1037, 137, 2499, '2025-10-20', 'card', 'succeeded'),
(1038, 138, 1999, '2025-10-22', 'paypal', 'succeeded'),
(1039, 139, 999, '2025-10-25', 'card', 'succeeded'),
(1040, 140, 3499, '2025-10-28', 'card', 'succeeded'),
(1041, 141, 15999, '2025-11-01', 'card', 'succeeded'),
(1042, 142, 7999, '2025-11-03', 'paypal', 'succeeded'),
(1043, 143, 12999, '2025-11-05', 'card', 'succeeded'),
(1044, 144, 19999, '2025-11-08', 'card', 'succeeded'),
(1045, 145, 2999, '2025-11-10', 'card', 'succeeded'),
(1046, 146, 3999, '2025-11-12', 'paypal', 'succeeded'),
(1047, 147, 5999, '2025-11-15', 'card', 'succeeded'),
(1048, 148, 4999, '2025-11-18', 'card', 'succeeded'),
(1049, 149, 8999, '2025-11-20', 'card', 'succeeded'),
(1050, 150, 2499, '2025-11-22', 'paypal', 'succeeded'),
(1051, 151, 1999, '2025-11-25', 'card', 'succeeded'),
(1052, 152, 999, '2025-11-28', 'card', 'succeeded'),
(1053, 153, 3499, '2025-12-01', 'card', 'succeeded'),
(1054, 154, 15999, '2025-12-03', 'paypal', 'succeeded'),
(1055, 155, 7999, '2025-12-05', 'card', 'succeeded'),
(1056, 156, 12999, '2025-12-08', 'card', 'succeeded'),
(1057, 157, 19999, '2025-12-10', 'card', 'succeeded'),
(1058, 158, 2999, '2025-12-12', 'paypal', 'succeeded'),
(1059, 159, 3999, '2025-12-15', 'card', 'succeeded'),
(1060, 160, 5999, '2025-12-18', 'card', 'succeeded'),
(1061, 161, 4999, '2025-12-20', 'card', 'succeeded'),
(1062, 162, 8999, '2025-12-22', 'paypal', 'succeeded'),
(1063, 163, 2499, '2025-12-25', 'card', 'succeeded'),
(1064, 164, 1999, '2025-12-28', 'card', 'succeeded'),
(1065, 165, 999, '2025-12-30', 'card', 'succeeded'),
(1066, 166, 3499, '2026-01-02', 'paypal', 'succeeded'),
(1067, 167, 15999, '2026-01-05', 'card', 'succeeded'),
(1068, 168, 7999, '2026-01-08', 'card', 'succeeded'),
(1069, 169, 12999, '2026-01-10', 'card', 'succeeded'),
(1070, 170, 19999, '2026-01-12', 'paypal', 'succeeded'),
(1071, 171, 2999, '2026-01-15', 'card', 'succeeded'),
(1072, 172, 3999, '2026-01-18', 'card', 'succeeded'),
(1073, 173, 5999, '2026-01-20', 'card', 'succeeded'),
(1074, 174, 4999, '2026-01-22', 'paypal', 'succeeded'),
(1075, 175, 8999, '2026-01-25', 'card', 'succeeded'),
(1076, 176, 2499, '2026-01-28', 'card', 'succeeded'),
(1077, 177, 1999, '2026-01-30', 'card', 'succeeded'),
(1078, 178, 999, '2026-02-02', 'paypal', 'succeeded'),
(1079, 179, 3499, '2026-02-05', 'card', 'succeeded'),
(1080, 180, 15999, '2026-02-08', 'card', 'succeeded'),
(1081, 181, 7999, '2026-02-10', 'card', 'succeeded'),
(1082, 182, 12999, '2026-02-12', 'paypal', 'succeeded'),
(1083, 183, 19999, '2026-02-15', 'card', 'succeeded'),
(1084, 184, 2999, '2026-02-18', 'card', 'succeeded'),
(1085, 185, 3999, '2026-02-20', 'card', 'succeeded'),
(1086, 186, 5999, '2026-02-22', 'paypal', 'succeeded'),
(1087, 187, 4999, '2026-02-25', 'card', 'succeeded'),
(1088, 188, 8999, '2026-02-28', 'card', 'succeeded'),
(1089, 189, 2499, '2026-03-02', 'card', 'succeeded'),
(1090, 190, 1999, '2026-03-05', 'paypal', 'succeeded'),
(1091, 191, 999, '2026-03-08', 'card', 'succeeded'),
(1092, 192, 3499, '2026-03-10', 'card', 'succeeded'),
(1093, 193, 15999, '2026-03-12', 'card', 'succeeded'),
(1094, 194, 7999, '2026-03-15', 'paypal', 'succeeded'),
(1095, 195, 12999, '2026-03-18', 'card', 'succeeded'),
(1096, 196, 19999, '2026-03-20', 'card', 'succeeded'),
(1097, 197, 2999, '2026-03-22', 'card', 'succeeded'),
(1098, 198, 3999, '2026-03-25', 'paypal', 'succeeded'),
(1099, 199, 5999, '2026-03-28', 'card', 'succeeded'),
(1100, 200, 4999, '2026-03-30', 'card', 'succeeded');

INSERT INTO refunds (id, order_id, amount_cents, refunded_at, reason) VALUES
(2001, 103, 8999, '2025-07-12', 'damaged'),
(2002, 112, 9999, '2025-08-19', 'late delivery'),
(2003, 125, 1999, '2025-09-22', 'wrong size'),
(2004, 140, 3499, '2025-10-30', 'defective'),
(2005, 155, 7999, '2025-12-07', 'not as described'),
(2006, 170, 19999, '2026-01-15', 'damaged in shipping'),
(2007, 185, 3999, '2026-02-25', 'customer changed mind'),
(2008, 200, 4999, '2026-04-02', 'duplicate order');

INSERT INTO order_items (id, order_id, product_id, quantity, unit_price_cents) VALUES
(3001, 101, 1, 1, 4999),
(3002, 101, 3, 1, 1999),
(3003, 102, 2, 1, 12999),
(3004, 103, 4, 1, 8999),
(3005, 104, 1, 1, 4999),
(3006, 105, 3, 1, 1999),
(3007, 106, 6, 1, 7499),
(3008, 106, 5, 1, 5999),
(3009, 107, 2, 1, 12999),
(3010, 107, 1, 1, 4999),
(3011, 108, 5, 1, 5999),
(3012, 109, 6, 1, 7499),
(3013, 110, 6, 1, 7499),
(3014, 111, 1, 1, 4999),
(3015, 111, 3, 1, 1999),
(3016, 112, 2, 1, 12999),
(3017, 112, 1, 1, 4999),
(3018, 113, 7, 1, 15999),
(3019, 114, 9, 1, 12999),
(3020, 115, 8, 1, 7999),
(3021, 116, 4, 1, 8999),
(3022, 117, 10, 1, 19999),
(3023, 118, 13, 1, 3999),
(3024, 119, 12, 1, 2999),
(3025, 120, 13, 1, 3999),
(3026, 121, 14, 1, 5999),
(3027, 122, 15, 1, 4999),
(3028, 123, 16, 1, 8999),
(3029, 124, 17, 1, 2499),
(3030, 125, 18, 1, 1999),
(3031, 126, 19, 1, 999),
(3032, 127, 20, 1, 3499),
(3033, 128, 7, 1, 15999),
(3034, 129, 8, 1, 7999),
(3035, 130, 9, 1, 12999),
(3036, 131, 10, 1, 19999),
(3037, 132, 12, 1, 2999),
(3038, 133, 13, 1, 3999),
(3039, 134, 14, 1, 5999),
(3040, 135, 15, 1, 4999),
(3041, 136, 16, 1, 8999),
(3042, 137, 17, 1, 2499),
(3043, 138, 18, 1, 1999),
(3044, 139, 19, 1, 999),
(3045, 140, 20, 1, 3499),
(3046, 141, 7, 1, 15999),
(3047, 142, 8, 1, 7999),
(3048, 143, 9, 1, 12999),
(3049, 144, 10, 1, 19999),
(3050, 145, 12, 1, 2999),
(3051, 146, 13, 1, 3999),
(3052, 147, 14, 1, 5999),
(3053, 148, 15, 1, 4999),
(3054, 149, 16, 1, 8999),
(3055, 150, 17, 1, 2499),
(3056, 151, 18, 1, 1999),
(3057, 152, 19, 1, 999),
(3058, 153, 20, 1, 3499),
(3059, 154, 7, 1, 15999),
(3060, 155, 8, 1, 7999),
(3061, 156, 9, 1, 12999),
(3062, 157, 10, 1, 19999),
(3063, 158, 12, 1, 2999),
(3064, 159, 13, 1, 3999),
(3065, 160, 14, 1, 5999),
(3066, 161, 15, 1, 4999),
(3067, 162, 16, 1, 8999),
(3068, 163, 17, 1, 2499),
(3069, 164, 18, 1, 1999),
(3070, 165, 19, 1, 999),
(3071, 166, 20, 1, 3499),
(3072, 167, 7, 1, 15999),
(3073, 168, 8, 1, 7999),
(3074, 169, 9, 1, 12999),
(3075, 170, 10, 1, 19999),
(3076, 171, 12, 1, 2999),
(3077, 172, 13, 1, 3999),
(3078, 173, 14, 1, 5999),
(3079, 174, 15, 1, 4999),
(3080, 175, 16, 1, 8999),
(3081, 176, 17, 1, 2499),
(3082, 177, 18, 1, 1999),
(3083, 178, 19, 1, 999),
(3084, 179, 20, 1, 3499),
(3085, 180, 7, 1, 15999),
(3086, 181, 8, 1, 7999),
(3087, 182, 9, 1, 12999),
(3088, 183, 10, 1, 19999),
(3089, 184, 12, 1, 2999),
(3090, 185, 13, 1, 3999),
(3091, 186, 14, 1, 5999),
(3092, 187, 15, 1, 4999),
(3093, 188, 16, 1, 8999),
(3094, 189, 17, 1, 2499),
(3095, 190, 18, 1, 1999),
(3096, 191, 19, 1, 999),
(3097, 192, 20, 1, 3499),
(3098, 193, 7, 1, 15999),
(3099, 194, 8, 1, 7999),
(3100, 195, 9, 1, 12999),
(3101, 196, 10, 1, 19999),
(3102, 197, 12, 1, 2999),
(3103, 198, 13, 1, 3999),
(3104, 199, 14, 1, 5999),
(3105, 200, 15, 1, 4999);

-- Additional tables for more comprehensive analytics

CREATE TABLE categories (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  parent_category_id INTEGER,
  FOREIGN KEY(parent_category_id) REFERENCES categories(id)
);

CREATE TABLE inventory (
  id INTEGER PRIMARY KEY,
  product_id INTEGER NOT NULL,
  quantity_available INTEGER NOT NULL DEFAULT 0,
  reorder_level INTEGER NOT NULL DEFAULT 10,
  last_updated TEXT NOT NULL,
  FOREIGN KEY(product_id) REFERENCES products(id)
);

CREATE TABLE customer_segments (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  min_order_value_cents INTEGER,
  max_order_value_cents INTEGER
);

CREATE TABLE promotions (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  discount_percent INTEGER,
  start_date TEXT NOT NULL,
  end_date TEXT NOT NULL,
  is_active BOOLEAN DEFAULT 1
);

CREATE TABLE order_promotions (
  id INTEGER PRIMARY KEY,
  order_id INTEGER NOT NULL,
  promotion_id INTEGER NOT NULL,
  discount_amount_cents INTEGER NOT NULL,
  FOREIGN KEY(order_id) REFERENCES orders(id),
  FOREIGN KEY(promotion_id) REFERENCES promotions(id)
);

-- Insert data for new tables
INSERT INTO categories (id, name, description, parent_category_id) VALUES
(1, 'Electronics', 'Electronic devices and accessories', NULL),
(2, 'Home & Garden', 'Home improvement and garden items', NULL),
(3, 'Fashion', 'Clothing and accessories', NULL),
(4, 'Computers', 'Computer hardware and software', 1),
(5, 'Audio', 'Audio equipment and accessories', 1),
(6, 'Furniture', 'Home furniture and decor', 2),
(7, 'Kitchen', 'Kitchen appliances and tools', 2),
(8, 'Men\'s Clothing', 'Clothing for men', 3),
(9, 'Women\'s Clothing', 'Clothing for women', 3);

INSERT INTO inventory (id, product_id, quantity_available, reorder_level, last_updated) VALUES
(1, 1, 50, 10, '2025-01-01'),
(2, 2, 25, 5, '2025-01-01'),
(3, 3, 100, 20, '2025-01-01'),
(4, 4, 30, 8, '2025-01-01'),
(5, 5, 40, 12, '2025-01-01'),
(6, 6, 35, 10, '2025-01-01'),
(7, 7, 15, 3, '2025-01-01'),
(8, 8, 20, 5, '2025-01-01'),
(9, 9, 25, 6, '2025-01-01'),
(10, 10, 10, 2, '2025-01-01'),
(11, 11, 60, 15, '2025-01-01'),
(12, 12, 80, 20, '2025-01-01'),
(13, 13, 45, 12, '2025-01-01'),
(14, 14, 30, 8, '2025-01-01'),
(15, 15, 25, 6, '2025-01-01'),
(16, 16, 20, 5, '2025-01-01'),
(17, 17, 40, 10, '2025-01-01'),
(18, 18, 100, 25, '2025-01-01'),
(19, 19, 200, 50, '2025-01-01'),
(20, 20, 35, 10, '2025-01-01');

INSERT INTO customer_segments (id, name, description, min_order_value_cents, max_order_value_cents) VALUES
(1, 'Budget', 'Price-conscious customers', 0, 9999),
(2, 'Standard', 'Regular customers', 10000, 19999),
(3, 'Premium', 'High-value customers', 20000, 49999),
(4, 'VIP', 'Top-tier customers', 50000, NULL);

INSERT INTO promotions (id, name, description, discount_percent, start_date, end_date, is_active) VALUES
(1, 'New Year Sale', '20% off all electronics', 20, '2025-01-01', '2025-01-31', 1),
(2, 'Spring Clearance', '15% off home items', 15, '2025-03-01', '2025-03-31', 1),
(3, 'Summer Fashion', '10% off all apparel', 10, '2025-06-01', '2025-08-31', 1),
(4, 'Black Friday', '30% off everything', 30, '2025-11-24', '2025-11-30', 0),
(5, 'Holiday Special', '25% off premium items', 25, '2025-12-01', '2025-12-25', 0);

INSERT INTO order_promotions (id, order_id, promotion_id, discount_amount_cents) VALUES
(1, 101, 1, 1399),
(2, 102, 1, 2599),
(3, 104, 1, 999),
(4, 107, 1, 2699),
(5, 111, 1, 1399),
(6, 113, 1, 3199),
(7, 114, 3, 1299),
(8, 116, 3, 899),
(9, 120, 2, 599),
(10, 125, 2, 399);
